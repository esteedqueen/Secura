<template name="dashboard">
	<div class="container">
		<div class="row" id="champion-messages">
			<div class="col-md-3">
				{{> add}}
				<!-- {{> addWithModal}} -->
				<!-- {{> favorites}} -->
			</div>
			<div class="col-md-9">
				{{> alert}}
				{{> contacts}}
			</div>
		</div>
	</div>
</template>


<template name="add">
	<div class="panel panel-default">
			<h1>Setup Emergency Contacts</h1>
			<div class="panel-heading">
				<h3 class="panel-title">Add a Contact</h3>
			</div>
			<div class="panel-body">
				{{#autoForm collection="Contacts" id="add" type="insert"}}
				{{> afQuickField name="name"}}
				{{> afQuickField name="email"}}
				{{> afQuickField name="phone"}}

				<button type="submit" class="btn btn-primary">Add Contact</button>
				{{/autoForm}}
			</div>
	</div>
</template>

<template name="addWithModal">
	<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title">Add with a modal</h3>
			</div>
			<div class="panel-body">
				<a href="#afModal" data-toggle="modal" class="btn btn-primary" collection="Contacts" operation="insert" fields="name,email,phone">Add a new Contact</a>
			</div>
	</div>
</template>

<template name="contacts">
	{{#each orderByFavorites Contacts}}
		<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						{{name}}
						<span class="pull-right">
							<i class="fa fa-check-circle-o"></i> 
						</span>
					</h3>
				</div>
				<div class="panel-body">
					
					<div class="media">
						
						<div class="media-body">
							<p>{{name}}</p>
							<p>{{email}}</p>
							<p>{{phone}}</p>
							{{#if $eq owner User._id}}
							<small>
								{{#afModal title="Update contact" omitFields="createdAt,updatedAt,owner" class="text-primary" collection="Contacts" operation="update" doc=_id}}
									<i class="fa fa-pencil" buttonContent="Edit Contact"></i> Edit contact
								{{/afModal}}
								{{#afModal title="Set Custom Message" omitFields="createdAt,updatedAt,owner,name,email,phone" class="text-primary" collection="Contacts" operation="update" doc=_id}}
									<i class="fa fa-alert" buttonContent="Edit Contact"></i> Set Custom Message
								{{/afModal}}
								{{#afModal title="Delete Contact" class="text-danger" collection="Contacts" operation="remove" doc=_id}}
									<i class="fa fa-times" buttonContent="Edit Contact"></i> Delete
								{{/afModal}}
							</small>
							{{/if}}
						</div>
					</div>
				</div>
				<div class="panel-footer">
					
				</div>
		</div>
	{{/each}}
</template>

<!-- <template name="favorites">
	{{#if Favorites 'Posts'}}
	<div class="panel panel-default">
		<div class="panel-heading">
				<h3 class="panel-title">Favorites</h3>
		</div>
		<div class="panel-body">
			<ul>
			{{#each Favorites 'Posts'}}
				<li>
					<a>{{title}}</a>
				</li>
			{{/each}}
			</ul>
		</div>
	</div>
	{{/if}}
</template> -->